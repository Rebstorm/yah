{"hash":"911c282e554a8b7c56df0fdfc97040ecaf8a9b2c","fesm2020":{"code":"import * as i0 from '@angular/core';\nimport { Injectable, Component, ViewChild, NgModule } from '@angular/core';\nimport * as i5 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport { timer, combineLatest, NEVER } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport * as i1 from '@angular/common/http';\nimport * as i2 from '@ngx-pwa/local-storage';\nimport * as i2$1 from '@angular/router';\nimport * as i3 from '@ngneat/hot-toast';\nimport * as i4 from 'ngx-spinner';\nimport { NgxSpinnerModule } from 'ngx-spinner';\n\nclass SolarService {\n    constructor(http, localDb) {\n        this.http = http;\n        this.localDb = localDb;\n        this.internalSiteId = 'site';\n        this.internalApiKey = 'apiKey';\n        this.BASE_URL = 'https://monitoringapi.solaredge.com/site';\n        this.SOLAR_IS_ACTIVATED_KEY = 'SOLAR_EDGE_ACTIVATED';\n        this.SOLAR_SITE_ID_KEY = 'SOLAR_EDGE_SITE_ID';\n        this.SOLAR_SITE_API_KEY = 'SOLAR_EDGE_API_KEY';\n        this.delayForFiveSeconds = () => timer(5000);\n        this.isActivated$ = this.localDb\n            .get(this.SOLAR_IS_ACTIVATED_KEY, { type: 'boolean' })\n            .pipe(map((isActivated) => (isActivated === undefined ? false : isActivated)));\n        this.siteId = this.localDb.watch(this.SOLAR_SITE_ID_KEY, {\n            type: 'string',\n        });\n        this.apiKey = this.localDb.watch(this.SOLAR_SITE_API_KEY, {\n            type: 'string',\n        });\n        this.currentPower$ = combineLatest([\n            this.localDb.watch(this.SOLAR_IS_ACTIVATED_KEY, { type: 'boolean' }),\n            this.localDb.watch(this.SOLAR_SITE_ID_KEY, { type: 'string' }),\n            this.localDb.watch(this.SOLAR_SITE_API_KEY, { type: 'string' }),\n        ]).pipe(map(([activated, siteId, apiKey]) => {\n            if (activated) {\n                this.internalSiteId = siteId;\n                this.internalApiKey = apiKey;\n                return siteId !== undefined && apiKey !== undefined;\n            }\n            return false;\n        }), switchMap((shouldRequest) => {\n            return shouldRequest\n                ? this.http\n                    .get(`${this.BASE_URL}/${this.internalSiteId}/currentPowerFlow.json`, {\n                    params: {\n                        api_key: this.internalApiKey,\n                    },\n                })\n                    .pipe()\n                : NEVER;\n        }));\n    }\n    setActivated(isActivated) {\n        return this.localDb.set(this.SOLAR_IS_ACTIVATED_KEY, isActivated, {\n            type: 'boolean',\n        });\n    }\n    setSiteId(value) {\n        return this.localDb.set(this.SOLAR_SITE_ID_KEY, value, {\n            type: 'string',\n        });\n    }\n    setApiKey(value) {\n        return this.localDb.set(this.SOLAR_SITE_API_KEY, value, {\n            type: 'string',\n        });\n    }\n}\nSolarService.ɵfac = function SolarService_Factory(t) { return new (t || SolarService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.StorageMap)); };\nSolarService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: SolarService, factory: SolarService.ɵfac, providedIn: 'root' });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SolarService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root',\n            }]\n    }], function () { return [{ type: i1.HttpClient }, { type: i2.StorageMap }]; }, null); })();\n\nfunction SolarButtonComponent_div_5_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵelementStart(1, \"div\", 7);\n    i0.ɵɵelement(2, \"img\", 8);\n    i0.ɵɵelementStart(3, \"div\", 9);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 10);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 7);\n    i0.ɵɵelement(8, \"img\", 11);\n    i0.ɵɵelementStart(9, \"div\", 9);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 10);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 7);\n    i0.ɵɵelement(14, \"img\", 12);\n    i0.ɵɵelementStart(15, \"div\", 9);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", ctx_r0.pvLoad > 0 ? \"saving\" : \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r0.pvLoad, \" \", ctx_r0.loadUnit, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.solarPumpingIn, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", ctx_r0.pvLoad > ctx_r0.gridLoad ? \"saving\" : \"draining\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r0.load, \" \", ctx_r0.loadUnit, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.gridPumpinInOrOut, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", ctx_r0.gridLoad > 0 ? \"draining\" : \"saving\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r0.gridLoad, \" \", ctx_r0.loadUnit, \" \");\n} }\nfunction SolarButtonComponent_div_6_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.lastUpdated);\n} }\nclass SolarButtonComponent {\n    constructor(solarService, router, hotToast, ngxSpinner) {\n        this.solarService = solarService;\n        this.router = router;\n        this.hotToast = hotToast;\n        this.ngxSpinner = ngxSpinner;\n        this.loadUnit = '';\n        this.finishedLoading = false;\n        this.ngxSpinner.show('solar-connection-spinner');\n        this.solarService.currentPower$.subscribe({\n            next: (res) => this.paintNumbers(res),\n            error: (error) => {\n                if (error.status === 403) {\n                    this.hotToast.error(`SolarEdge Brauche Ihr aufmerksamkeit: ${error.error.String}`, {\n                        style: {\n                            background: 'rgba(255, 255, 255, 0.8)',\n                        },\n                        id: 'solar-edge',\n                        ariaLive: 'polite',\n                    });\n                    router.navigate(['setup']).then();\n                }\n                else if (error.status === 429) {\n                    this.paintTooManyRequests();\n                }\n            }\n        });\n    }\n    ngOnInit() { }\n    paintNumbers(edgePowerFlow) {\n        this.pvLoad = edgePowerFlow.siteCurrentPowerFlow.PV.currentPower;\n        this.gridLoad = edgePowerFlow.siteCurrentPowerFlow.GRID.currentPower;\n        this.load = edgePowerFlow.siteCurrentPowerFlow.LOAD.currentPower;\n        this.loadUnit = edgePowerFlow.siteCurrentPowerFlow.unit;\n        this.lastUpdated = `Aktualisiert: ${new Date().toLocaleTimeString()}`;\n        this.solarPumpingIn =\n            edgePowerFlow.siteCurrentPowerFlow.PV.currentPower > 0 ? '>' : '';\n        this.gridPumpinInOrOut =\n            edgePowerFlow.siteCurrentPowerFlow.PV.currentPower >\n                edgePowerFlow.siteCurrentPowerFlow.LOAD.currentPower\n                ? '>'\n                : '<';\n        this.ngxSpinner.hide('solar-connection-spinner');\n        this.finishedLoading = true;\n    }\n    paintTooManyRequests() {\n        console.log('Too many requests!');\n    }\n}\nSolarButtonComponent.ɵfac = function SolarButtonComponent_Factory(t) { return new (t || SolarButtonComponent)(i0.ɵɵdirectiveInject(SolarService), i0.ɵɵdirectiveInject(i2$1.Router), i0.ɵɵdirectiveInject(i3.HotToastService), i0.ɵɵdirectiveInject(i4.NgxSpinnerService)); };\nSolarButtonComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: SolarButtonComponent, selectors: [[\"yah-solar-button\"]], decls: 7, vars: 3, consts: [[1, \"box\"], [1, \"header\"], [\"src\", \"./assets/solar-panel.svg\"], [\"name\", \"solar-connection-spinner\", \"bdColor\", \"rgba(0,0,0,0)\", \"size\", \"medium\", \"color\", \"#fff\", \"type\", \"square-loader\", 3, \"fullScreen\"], [\"class\", \"power-layout\", 4, \"ngIf\"], [\"class\", \"footer\", 4, \"ngIf\"], [1, \"power-layout\"], [1, \"power-item\"], [\"src\", \"./assets/solar-panel-inner.svg\", 1, \"img\"], [1, \"text\", 3, \"ngClass\"], [1, \"power-flow\"], [\"src\", \"./assets/home.svg\", 1, \"img\"], [\"src\", \"./assets/power-line.svg\", 1, \"img\"], [1, \"footer\"]], template: function SolarButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelement(2, \"img\", 2);\n        i0.ɵɵtext(3, \"Solar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(4, \"ngx-spinner\", 3);\n        i0.ɵɵtemplate(5, SolarButtonComponent_div_5_Template, 17, 11, \"div\", 4);\n        i0.ɵɵtemplate(6, SolarButtonComponent_div_6_Template, 2, 1, \"div\", 5);\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"fullScreen\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.finishedLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.finishedLoading);\n    } }, directives: [i4.NgxSpinnerComponent, i5.NgIf, i5.NgClass], styles: [\".box[_ngcontent-%COMP%]{background:rgba(255,255,255,.25);border:1px solid rgba(255,255,255,.2);backdrop-filter:blur(.2rem);-webkit-backdrop-filter:blur(.2rem);border-radius:.7rem;min-height:20rem;min-width:40rem;max-width:40rem;transition:all 50ms ease;position:relative}.box[_ngcontent-%COMP%]:active{box-shadow:0 .4rem 2rem #0000005e}.box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{border-radius:.7rem .7rem 0 0;background:#fff;color:#000;font-size:2rem;display:grid;grid-template-columns:10fr 90fr;padding:.5rem 1rem}.box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]{padding-top:2rem;display:grid;grid-auto-columns:1fr 3rem 1fr 3rem 1fr;grid-auto-flow:column;justify-items:center}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]   .power-flow[_ngcontent-%COMP%]{font-size:4rem}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]   .power-item[_ngcontent-%COMP%]{text-align:center}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:1.5rem}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]   .draining[_ngcontent-%COMP%]{color:#ea1313}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]   .saving[_ngcontent-%COMP%]{color:#44db33}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{height:4rem}.box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{font-size:.8rem;position:absolute;bottom:0;right:0;padding:0 .3rem .4rem 0}\"] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SolarButtonComponent, [{\n        type: Component,\n        args: [{ selector: 'yah-solar-button', template: \"<div class=\\\"box\\\">\\n  <div class=\\\"header\\\"><img src=\\\"./assets/solar-panel.svg\\\" />Solar</div>\\n\\n  <ngx-spinner\\n    name=\\\"solar-connection-spinner\\\"\\n    bdColor=\\\"rgba(0,0,0,0)\\\"\\n    size=\\\"medium\\\"\\n    color=\\\"#fff\\\"\\n    type=\\\"square-loader\\\"\\n    [fullScreen]=\\\"false\\\"\\n    ></ngx-spinner\\n  >\\n\\n  <div class=\\\"power-layout\\\" *ngIf=\\\"finishedLoading\\\">\\n    <div class=\\\"power-item\\\">\\n      <img class=\\\"img\\\" src=\\\"./assets/solar-panel-inner.svg\\\"/>\\n      <div class=\\\"text\\\" [ngClass]=\\\"pvLoad > 0 ? 'saving' : ''\\\">\\n        {{ pvLoad }} {{ loadUnit }}\\n      </div>\\n    </div>\\n    <div class=\\\"power-flow\\\"> {{solarPumpingIn}} </div>\\n    <div class=\\\"power-item\\\">\\n      <img class=\\\"img\\\" src=\\\"./assets/home.svg\\\" />\\n      <div class=\\\"text\\\" [ngClass]=\\\"pvLoad > gridLoad ? 'saving' : 'draining'\\\">\\n        {{ load }} {{ loadUnit }}\\n      </div>\\n    </div>\\n    <div class=\\\"power-flow\\\"> {{gridPumpinInOrOut}} </div>\\n    <div class=\\\"power-item\\\">\\n      <img class=\\\"img\\\" src=\\\"./assets/power-line.svg\\\"/>\\n      <div class=\\\"text\\\" [ngClass]=\\\"gridLoad > 0 ? 'draining' : 'saving'\\\">\\n        {{ gridLoad }} {{ loadUnit }}\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"footer\\\" *ngIf=\\\"finishedLoading\\\">{{lastUpdated}}</div>\\n\\n</div>\\n\\n<!-- <div>Icons made by <a href=\\\"https://www.flaticon.com/authors/monkik\\\" title=\\\"monkik\\\">monkik</a> from <a href=\\\"https://www.flaticon.com/\\\" title=\\\"Flaticon\\\">www.flaticon.com</a></div>\\n\\n<div>Icons made by <a href=\\\"https://creativemarket.com/Becris\\\" title=\\\"Becris\\\">Becris</a> from <a href=\\\"https://www.flaticon.com/\\\" title=\\\"Flaticon\\\">www.flaticon.com</a></div>\\n<div>Icons made by <a href=\\\"https://www.flaticon.com/authors/smalllikeart\\\" title=\\\"smalllikeart\\\">smalllikeart</a> from <a href=\\\"https://www.flaticon.com/\\\" title=\\\"Flaticon\\\">www.flaticon.com</a></div>\\n<div>Icons made by <a href=\\\"https://www.freepik.com\\\" title=\\\"Freepik\\\">Freepik</a> from <a href=\\\"https://www.flaticon.com/\\\" title=\\\"Flaticon\\\">www.flaticon.com</a></div>\\n\\n-->\\n\", styles: [\".box{background:rgba(255,255,255,.25);border:1px solid rgba(255,255,255,.2);backdrop-filter:blur(.2rem);-webkit-backdrop-filter:blur(.2rem);border-radius:.7rem;min-height:20rem;min-width:40rem;max-width:40rem;transition:all 50ms ease;position:relative}.box:active{box-shadow:0 .4rem 2rem #0000005e}.box .header{border-radius:.7rem .7rem 0 0;background:#fff;color:#000;font-size:2rem;display:grid;grid-template-columns:10fr 90fr;padding:.5rem 1rem}.box .header img{width:3rem;height:3rem}.box .power-layout{padding-top:2rem;display:grid;grid-auto-columns:1fr 3rem 1fr 3rem 1fr;grid-auto-flow:column;justify-items:center}.box .power-layout .power-flow{font-size:4rem}.box .power-layout .power-item{text-align:center}.box .power-layout .text{font-size:1.5rem}.box .power-layout .draining{color:#ea1313}.box .power-layout .saving{color:#44db33}.box .power-layout .img{height:4rem}.box .footer{font-size:.8rem;position:absolute;bottom:0;right:0;padding:0 .3rem .4rem 0}\\n\"] }]\n    }], function () { return [{ type: SolarService }, { type: i2$1.Router }, { type: i3.HotToastService }, { type: i4.NgxSpinnerService }]; }, null); })();\n\nconst _c0 = [\"activateToggle\"];\nconst _c1 = [\"siteId\"];\nconst _c2 = [\"apiKey\"];\nclass SolarSetupComponent {\n    constructor(solarService) {\n        this.solarService = solarService;\n        this.isActivated = false;\n        this.validApiKey = 'disconnected';\n        this.validSiteId = 'disconnected';\n    }\n    ngOnInit() {\n        this.solarService.isActivated$.subscribe((isActivated) => {\n            this.isActivated = isActivated;\n        });\n        this.solarService.apiKey.subscribe((apiKey) => {\n            if (apiKey) {\n                this.apiKey.nativeElement.value = apiKey;\n                this.validApiKey = 'connected';\n            }\n        });\n        this.solarService.siteId.subscribe((siteId) => {\n            if (siteId) {\n                this.siteId.nativeElement.value = siteId;\n                this.validSiteId = 'connected';\n            }\n        });\n    }\n    setChecked(event) {\n        const htmlInput = event.target;\n        this.solarService.setActivated(htmlInput.checked).subscribe();\n    }\n    setSiteId(event) {\n        const htmlInput = event.target;\n        if (htmlInput.value.length > 0) {\n            this.validSiteId = 'connected';\n            this.solarService.setSiteId(htmlInput.value).subscribe();\n        }\n    }\n    setApiKey(event) {\n        const htmlInput = event.target;\n        if (htmlInput.value.length > 0) {\n            this.validApiKey = 'connected';\n            this.solarService.setApiKey(htmlInput.value).subscribe();\n        }\n    }\n}\nSolarSetupComponent.ɵfac = function SolarSetupComponent_Factory(t) { return new (t || SolarSetupComponent)(i0.ɵɵdirectiveInject(SolarService)); };\nSolarSetupComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: SolarSetupComponent, selectors: [[\"yah-solar-setup\"]], viewQuery: function SolarSetupComponent_Query(rf, ctx) { if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n        i0.ɵɵviewQuery(_c1, 7);\n        i0.ɵɵviewQuery(_c2, 7);\n    } if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.activateToggle = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.siteId = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.apiKey = _t.first);\n    } }, decls: 23, vars: 7, consts: [[\"src\", \"assets/solar-panel.svg\", \"width\", \"32\"], [1, \"no-margin\"], [1, \"switch\"], [\"type\", \"checkbox\", 3, \"checked\", \"change\"], [\"activateToggle\", \"\"], [1, \"slider\"], [1, \"input-row\"], [\"type\", \"text\", 1, \"input-frosted\", 3, \"input\"], [\"siteId\", \"\"], [\"apiKey\", \"\"]], template: function SolarSetupComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\");\n        i0.ɵɵelementStart(1, \"h2\");\n        i0.ɵɵelement(2, \"img\", 0);\n        i0.ɵɵtext(3, \" SolarEdge Einstellungen \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"p\", 1);\n        i0.ɵɵtext(5, \" Aktiviert \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"label\", 2);\n        i0.ɵɵelementStart(7, \"input\", 3, 4);\n        i0.ɵɵlistener(\"change\", function SolarSetupComponent_Template_input_change_7_listener($event) { return ctx.setChecked($event); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"span\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"p\");\n        i0.ɵɵelementStart(11, \"p\", 1);\n        i0.ɵɵtext(12, \" SiteId \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 6);\n        i0.ɵɵelementStart(14, \"input\", 7, 8);\n        i0.ɵɵlistener(\"input\", function SolarSetupComponent_Template_input_input_14_listener($event) { return ctx.setSiteId($event); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"i\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"p\", 1);\n        i0.ɵɵtext(18, \" Api Key \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 6);\n        i0.ɵɵelementStart(20, \"input\", 7, 9);\n        i0.ɵɵlistener(\"input\", function SolarSetupComponent_Template_input_input_20_listener($event) { return ctx.setApiKey($event); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(22, \"i\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"checked\", ctx.isActivated);\n        i0.ɵɵadvance(9);\n        i0.ɵɵclassMapInterpolate1(\"symbol \", ctx.validSiteId, \"\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵclassMapInterpolate1(\"symbol \", ctx.validApiKey, \"\");\n    } }, styles: [\"form[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column}form[_ngcontent-%COMP%]   .no-margin[_ngcontent-%COMP%]{margin:0}form[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]{display:flex;align-items:center}form[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]   .input-frosted[_ngcontent-%COMP%]{color:#fff;font-size:1.4rem;font-weight:800;padding:1rem;border:none;background:rgba(255,255,255,.4);backdrop-filter:blur(.2rem);-webkit-backdrop-filter:blur(.2rem);border-radius:.7rem;max-width:90%}form[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]   .symbol[_ngcontent-%COMP%]{display:flex;align-self:center;width:2rem;height:2rem;margin-left:.5rem}form[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]   .symbol.connected[_ngcontent-%COMP%]{background:url(\\\"data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 encoding%3D%22iso-8859-1%22%3F%3E%0D%3C!-- Generator%3A Adobe Illustrator 19.0.0%2C SVG Export Plug-In . SVG Version%3A 6.00 Build 0)  --%3E%0D%3Csvg version%3D%221.1%22 id%3D%22Layer_1%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 x%3D%220px%22 y%3D%220px%22%0D%09 viewBox%3D%220 0 511.999 511.999%22 style%3D%22enable-background%3Anew 0 0 511.999 511.999%3B%22 xml%3Aspace%3D%22preserve%22%3E%0D%3Cpath style%3D%22fill%3A%23B7E183%3B%22 d%3D%22M502.87%2C75.474c-12.201-12.204-31.952-12.205-44.154-0.001L163.89%2C370.299L53.284%2C259.693%0D%09c-12.201-12.204-31.952-12.205-44.154-0.001c-12.173%2C12.174-12.173%2C31.981%2C0%2C44.153L141.814%2C436.53%0D%09c12.199%2C12.198%2C31.953%2C12.2%2C44.153%2C0L502.87%2C119.626C515.042%2C107.453%2C515.042%2C87.645%2C502.87%2C75.474z%22%2F%3E%0D%3Cpath style%3D%22fill%3A%2371DE56%3B%22 d%3D%22M502.87%2C75.474c-12.201-12.204-31.952-12.205-44.154-0.001L243.511%2C290.678v88.306L502.87%2C119.626%0D%09C515.042%2C107.453%2C515.042%2C87.645%2C502.87%2C75.474z%22%2F%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3C%2Fsvg%3E%0D\\\") no-repeat}form[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]   .symbol.disconnected[_ngcontent-%COMP%]{background:url(\\\"data:image/svg+xml,%3Csvg height%3D%22100%25%22 viewBox%3D%220 0 329.26933 329%22 width%3D%2220%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg fill%3D%22%23f44336%22%3E%3Cpath d%3D%22m21.339844 329.398438c-5.460938 0-10.925782-2.089844-15.082032-6.25-8.34375-8.339844-8.34375-21.824219 0-30.164063l286.589844-286.59375c8.339844-8.339844 21.824219-8.339844 30.164063 0 8.34375 8.339844 8.34375 21.824219 0 30.164063l-286.589844 286.59375c-4.183594 4.179687-9.621094 6.25-15.082031 6.25zm0 0%22%2F%3E%3Cpath d%3D%22m307.929688 329.398438c-5.460938 0-10.921876-2.089844-15.082032-6.25l-286.589844-286.59375c-8.34375-8.339844-8.34375-21.824219 0-30.164063 8.339844-8.339844 21.820313-8.339844 30.164063 0l286.589844 286.59375c8.34375 8.339844 8.34375 21.824219 0 30.164063-4.160157 4.179687-9.621094 6.25-15.082031 6.25zm0 0%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\\\") center no-repeat}form[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]   .symbol.loading[_ngcontent-%COMP%]{background:url(\\\"data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 encoding%3D%22UTF-8%22 standalone%3D%22no%22%3F%3E%3Csvg xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 version%3D%221.0%22 width%3D%22100pt%22 height%3D%22100pt%22 viewBox%3D%220 0 128 128%22 xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23000%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23f8f8f8%22 transform%3D%22rotate(30 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23e8e8e8%22 transform%3D%22rotate(60 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23d4d4d4%22 transform%3D%22rotate(90 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23bebebe%22 transform%3D%22rotate(120 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23a6a6a6%22 transform%3D%22rotate(150 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%238e8e8e%22 transform%3D%22rotate(180 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23737373%22 transform%3D%22rotate(210 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%235a5a5a%22 transform%3D%22rotate(240 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23414141%22 transform%3D%22rotate(270 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%232a2a2a%22 transform%3D%22rotate(300 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23151515%22 transform%3D%22rotate(330 64 64)%22%2F%3E%3CanimateTransform attributeName%3D%22transform%22 type%3D%22rotate%22 values%3D%220 64 64%3B30 64 64%3B60 64 64%3B90 64 64%3B120 64 64%3B150 64 64%3B180 64 64%3B210 64 64%3B240 64 64%3B270 64 64%3B300 64 64%3B330 64 64%22 calcMode%3D%22discrete%22 dur%3D%22240ms%22 repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fg%3E%3C%2Fsvg%3E\\\");background-size:contain}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:\\\"\\\";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}\"] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SolarSetupComponent, [{\n        type: Component,\n        args: [{ selector: 'yah-solar-setup', template: \"<form>\\n\\n  <h2> <img src=\\\"assets/solar-panel.svg\\\" width=\\\"32\\\"> SolarEdge Einstellungen </h2>\\n  <p class=\\\"no-margin\\\"> Aktiviert </p>\\n  <label class=\\\"switch\\\">\\n    <input #activateToggle type=\\\"checkbox\\\" (change)=\\\"setChecked($event)\\\" [checked]=\\\"isActivated\\\">\\n    <span class=\\\"slider\\\"></span>\\n  </label>\\n\\n\\n  <p></p>\\n\\n  <p class=\\\"no-margin\\\"> SiteId </p>\\n  <div class=\\\"input-row\\\">\\n    <input #siteId (input)='setSiteId($event)' type=\\\"text\\\" class=\\\"input-frosted\\\">\\n    <i class=\\\"symbol {{validSiteId}}\\\" ></i>\\n  </div>\\n\\n  <p class=\\\"no-margin\\\"> Api Key </p>\\n  <div class=\\\"input-row\\\">\\n    <input #apiKey (input)='setApiKey($event)' type=\\\"text\\\" class=\\\"input-frosted\\\">\\n    <i class=\\\"symbol {{validApiKey}}\\\" ></i>\\n  </div>\\n\\n\\n\\n</form>\\n\\n\\n<!-- <div>Icons made by <a href=\\\"https://www.flaticon.com/authors/pixel-perfect\\\" title=\\\"Pixel perfect\\\">Pixel perfect</a> from <a href=\\\"https://www.flaticon.com/\\\" title=\\\"Flaticon\\\">www.flaticon.com</a></div> -->\\n\", styles: [\"form{display:flex;justify-content:center;flex-direction:column}form .no-margin{margin:0}form .input-row{display:flex;align-items:center}form .input-row .input-frosted{color:#fff;font-size:1.4rem;font-weight:800;padding:1rem;border:none;background:rgba(255,255,255,.4);backdrop-filter:blur(.2rem);-webkit-backdrop-filter:blur(.2rem);border-radius:.7rem;max-width:90%}form .input-row .symbol{display:flex;align-self:center;width:2rem;height:2rem;margin-left:.5rem}form .input-row .symbol.connected{background:url(\\\"data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 encoding%3D%22iso-8859-1%22%3F%3E%0D%3C!-- Generator%3A Adobe Illustrator 19.0.0%2C SVG Export Plug-In . SVG Version%3A 6.00 Build 0)  --%3E%0D%3Csvg version%3D%221.1%22 id%3D%22Layer_1%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 x%3D%220px%22 y%3D%220px%22%0D%09 viewBox%3D%220 0 511.999 511.999%22 style%3D%22enable-background%3Anew 0 0 511.999 511.999%3B%22 xml%3Aspace%3D%22preserve%22%3E%0D%3Cpath style%3D%22fill%3A%23B7E183%3B%22 d%3D%22M502.87%2C75.474c-12.201-12.204-31.952-12.205-44.154-0.001L163.89%2C370.299L53.284%2C259.693%0D%09c-12.201-12.204-31.952-12.205-44.154-0.001c-12.173%2C12.174-12.173%2C31.981%2C0%2C44.153L141.814%2C436.53%0D%09c12.199%2C12.198%2C31.953%2C12.2%2C44.153%2C0L502.87%2C119.626C515.042%2C107.453%2C515.042%2C87.645%2C502.87%2C75.474z%22%2F%3E%0D%3Cpath style%3D%22fill%3A%2371DE56%3B%22 d%3D%22M502.87%2C75.474c-12.201-12.204-31.952-12.205-44.154-0.001L243.511%2C290.678v88.306L502.87%2C119.626%0D%09C515.042%2C107.453%2C515.042%2C87.645%2C502.87%2C75.474z%22%2F%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3C%2Fsvg%3E%0D\\\") no-repeat}form .input-row .symbol.disconnected{background:url(\\\"data:image/svg+xml,%3Csvg height%3D%22100%25%22 viewBox%3D%220 0 329.26933 329%22 width%3D%2220%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg fill%3D%22%23f44336%22%3E%3Cpath d%3D%22m21.339844 329.398438c-5.460938 0-10.925782-2.089844-15.082032-6.25-8.34375-8.339844-8.34375-21.824219 0-30.164063l286.589844-286.59375c8.339844-8.339844 21.824219-8.339844 30.164063 0 8.34375 8.339844 8.34375 21.824219 0 30.164063l-286.589844 286.59375c-4.183594 4.179687-9.621094 6.25-15.082031 6.25zm0 0%22%2F%3E%3Cpath d%3D%22m307.929688 329.398438c-5.460938 0-10.921876-2.089844-15.082032-6.25l-286.589844-286.59375c-8.34375-8.339844-8.34375-21.824219 0-30.164063 8.339844-8.339844 21.820313-8.339844 30.164063 0l286.589844 286.59375c8.34375 8.339844 8.34375 21.824219 0 30.164063-4.160157 4.179687-9.621094 6.25-15.082031 6.25zm0 0%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\\\") center no-repeat}form .input-row .symbol.loading{background:url(\\\"data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 encoding%3D%22UTF-8%22 standalone%3D%22no%22%3F%3E%3Csvg xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 version%3D%221.0%22 width%3D%22100pt%22 height%3D%22100pt%22 viewBox%3D%220 0 128 128%22 xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23000%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23f8f8f8%22 transform%3D%22rotate(30 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23e8e8e8%22 transform%3D%22rotate(60 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23d4d4d4%22 transform%3D%22rotate(90 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23bebebe%22 transform%3D%22rotate(120 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23a6a6a6%22 transform%3D%22rotate(150 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%238e8e8e%22 transform%3D%22rotate(180 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23737373%22 transform%3D%22rotate(210 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%235a5a5a%22 transform%3D%22rotate(240 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23414141%22 transform%3D%22rotate(270 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%232a2a2a%22 transform%3D%22rotate(300 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23151515%22 transform%3D%22rotate(330 64 64)%22%2F%3E%3CanimateTransform attributeName%3D%22transform%22 type%3D%22rotate%22 values%3D%220 64 64%3B30 64 64%3B60 64 64%3B90 64 64%3B120 64 64%3B150 64 64%3B180 64 64%3B210 64 64%3B240 64 64%3B270 64 64%3B300 64 64%3B330 64 64%22 calcMode%3D%22discrete%22 dur%3D%22240ms%22 repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fg%3E%3C%2Fsvg%3E\\\");background-size:contain}.switch{position:relative;display:inline-block;width:60px;height:34px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.slider:before{position:absolute;content:\\\"\\\";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s}input:checked+.slider{background-color:#2196f3}input:focus+.slider{box-shadow:0 0 1px #2196f3}input:checked+.slider:before{transform:translate(26px)}\\n\"] }]\n    }], function () { return [{ type: SolarService }]; }, { activateToggle: [{\n            type: ViewChild,\n            args: ['activateToggle', { static: true }]\n        }], siteId: [{\n            type: ViewChild,\n            args: ['siteId', { static: true }]\n        }], apiKey: [{\n            type: ViewChild,\n            args: ['apiKey', { static: true }]\n        }] }); })();\n\nclass SolarModule {\n}\nSolarModule.ɵfac = function SolarModule_Factory(t) { return new (t || SolarModule)(); };\nSolarModule.ɵmod = /*@__PURE__*/ i0.ɵɵdefineNgModule({ type: SolarModule });\nSolarModule.ɵinj = /*@__PURE__*/ i0.ɵɵdefineInjector({ imports: [[\n            CommonModule,\n            NgxSpinnerModule\n        ]] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SolarModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [SolarButtonComponent, SolarSetupComponent],\n                imports: [\n                    CommonModule,\n                    NgxSpinnerModule\n                ],\n                exports: [SolarButtonComponent, SolarSetupComponent]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && i0.ɵɵsetNgModuleScope(SolarModule, { declarations: [SolarButtonComponent, SolarSetupComponent], imports: [CommonModule,\n        NgxSpinnerModule], exports: [SolarButtonComponent, SolarSetupComponent] }); })();\n\n/*\n * Public API Surface of yah-solar\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { SolarButtonComponent, SolarModule, SolarService, SolarSetupComponent };\n","map":{"version":3,"file":"yah-solar.mjs","sources":["../../../projects/yah-solar/src/lib/services/solar.service.ts","../../../projects/yah-solar/src/lib/components/solar-button/solar-button.component.html","../../../projects/yah-solar/src/lib/components/solar-button/solar-button.component.ts","../../../projects/yah-solar/src/lib/components/solar-setup/solar-setup.component.ts","../../../projects/yah-solar/src/lib/components/solar-setup/solar-setup.component.html","../../../projects/yah-solar/src/lib/solar.module.ts","../../../projects/yah-solar/src/public-api.ts","../../../projects/yah-solar/src/yah-solar.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { combineLatest, concat, EMPTY, interval, NEVER, Observable, of, timer } from 'rxjs';\nimport { delay, delayWhen, map, repeat, switchMap, timeInterval, timestamp } from 'rxjs/operators';\nimport { HttpClient } from '@angular/common/http';\nimport { SolarEdgePowerFlow } from '../types/solar.edge.power.flow';\nimport { StorageMap } from '@ngx-pwa/local-storage';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SolarService {\n  public currentPower$: Observable<SolarEdgePowerFlow>;\n  public isActivated$: Observable<boolean>;\n  public siteId: Observable<string | undefined>;\n  public apiKey: Observable<string | undefined>;\n\n  private internalSiteId = 'site';\n  private internalApiKey = 'apiKey';\n\n  private BASE_URL = 'https://monitoringapi.solaredge.com/site';\n\n  private SOLAR_IS_ACTIVATED_KEY = 'SOLAR_EDGE_ACTIVATED';\n  private SOLAR_SITE_ID_KEY = 'SOLAR_EDGE_SITE_ID';\n  private SOLAR_SITE_API_KEY = 'SOLAR_EDGE_API_KEY';\n\n  private delayForFiveSeconds = () => timer(5000);\n\n\n\n  constructor(private http: HttpClient, private localDb: StorageMap) {\n    this.isActivated$ = this.localDb\n      .get(this.SOLAR_IS_ACTIVATED_KEY, { type: 'boolean' })\n      .pipe(\n        map((isActivated) => (isActivated === undefined ? false : isActivated))\n      );\n\n    this.siteId = this.localDb.watch(this.SOLAR_SITE_ID_KEY, {\n      type: 'string',\n    });\n    this.apiKey = this.localDb.watch(this.SOLAR_SITE_API_KEY, {\n      type: 'string',\n    });\n\n    this.currentPower$ = combineLatest([\n      this.localDb.watch(this.SOLAR_IS_ACTIVATED_KEY, { type: 'boolean' }),\n      this.localDb.watch(this.SOLAR_SITE_ID_KEY, { type: 'string' }),\n      this.localDb.watch(this.SOLAR_SITE_API_KEY, { type: 'string' }),\n    ]).pipe(\n      map(([activated, siteId, apiKey]) => {\n        if (activated) {\n          this.internalSiteId = siteId;\n          this.internalApiKey = apiKey;\n          return siteId !== undefined && apiKey !== undefined;\n        }\n        return false;\n      }),\n      switchMap((shouldRequest) => {\n        return shouldRequest\n          ? this.http\n              .get<SolarEdgePowerFlow>(\n                `${this.BASE_URL}/${this.internalSiteId}/currentPowerFlow.json`,\n                {\n                  params: {\n                    api_key: this.internalApiKey,\n                  },\n                }\n              )\n              .pipe()\n          : NEVER;\n      })\n    );\n  }\n\n  public setActivated(isActivated: boolean): Observable<null> {\n    return this.localDb.set(this.SOLAR_IS_ACTIVATED_KEY, isActivated, {\n      type: 'boolean',\n    });\n  }\n\n  setSiteId(value: string): Observable<null> {\n    return this.localDb.set(this.SOLAR_SITE_ID_KEY, value, {\n      type: 'string',\n    });\n  }\n\n  setApiKey(value: string): Observable<null> {\n    return this.localDb.set(this.SOLAR_SITE_API_KEY, value, {\n      type: 'string',\n    });\n  }\n}\n","<div class=\"box\">\n  <div class=\"header\"><img src=\"./assets/solar-panel.svg\" />Solar</div>\n\n  <ngx-spinner\n    name=\"solar-connection-spinner\"\n    bdColor=\"rgba(0,0,0,0)\"\n    size=\"medium\"\n    color=\"#fff\"\n    type=\"square-loader\"\n    [fullScreen]=\"false\"\n    ></ngx-spinner\n  >\n\n  <div class=\"power-layout\" *ngIf=\"finishedLoading\">\n    <div class=\"power-item\">\n      <img class=\"img\" src=\"./assets/solar-panel-inner.svg\"/>\n      <div class=\"text\" [ngClass]=\"pvLoad > 0 ? 'saving' : ''\">\n        {{ pvLoad }} {{ loadUnit }}\n      </div>\n    </div>\n    <div class=\"power-flow\"> {{solarPumpingIn}} </div>\n    <div class=\"power-item\">\n      <img class=\"img\" src=\"./assets/home.svg\" />\n      <div class=\"text\" [ngClass]=\"pvLoad > gridLoad ? 'saving' : 'draining'\">\n        {{ load }} {{ loadUnit }}\n      </div>\n    </div>\n    <div class=\"power-flow\"> {{gridPumpinInOrOut}} </div>\n    <div class=\"power-item\">\n      <img class=\"img\" src=\"./assets/power-line.svg\"/>\n      <div class=\"text\" [ngClass]=\"gridLoad > 0 ? 'draining' : 'saving'\">\n        {{ gridLoad }} {{ loadUnit }}\n      </div>\n    </div>\n  </div>\n  <div class=\"footer\" *ngIf=\"finishedLoading\">{{lastUpdated}}</div>\n\n</div>\n\n<!-- <div>Icons made by <a href=\"https://www.flaticon.com/authors/monkik\" title=\"monkik\">monkik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>\n\n<div>Icons made by <a href=\"https://creativemarket.com/Becris\" title=\"Becris\">Becris</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>\n<div>Icons made by <a href=\"https://www.flaticon.com/authors/smalllikeart\" title=\"smalllikeart\">smalllikeart</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>\n<div>Icons made by <a href=\"https://www.freepik.com\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>\n\n-->\n","import { Component, OnInit } from '@angular/core';\nimport { SolarService } from '../../services/solar.service';\nimport { Router } from '@angular/router';\nimport { HotToastService } from '@ngneat/hot-toast';\nimport { SolarEdgePowerFlow } from '../../types/solar.edge.power.flow';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { error } from '@angular/compiler/src/util';\n\n@Component({\n  selector: 'yah-solar-button',\n  templateUrl: './solar-button.component.html',\n  styleUrls: ['./solar-button.component.scss'],\n})\nexport class SolarButtonComponent implements OnInit {\n  pvLoad: number;\n  gridLoad: number;\n  load: number;\n  loadUnit = '';\n  finishedLoading = false;\n  lastUpdated: string;\n\n  solarPumpingIn: string;\n  gridPumpinInOrOut: string;\n\n  constructor(\n    private solarService: SolarService,\n    private router: Router,\n    private hotToast: HotToastService,\n    private ngxSpinner: NgxSpinnerService\n  ) {\n    this.ngxSpinner.show('solar-connection-spinner');\n\n    this.solarService.currentPower$.subscribe({\n      next: (res) => this.paintNumbers(res) ,\n      error: (error) => {\n        if (error.status === 403) {\n          this.hotToast.error(\n            `SolarEdge Brauche Ihr aufmerksamkeit: ${error.error.String}`,\n            {\n              style: {\n                background: 'rgba(255, 255, 255, 0.8)',\n              },\n              id: 'solar-edge',\n              ariaLive: 'polite',\n            }\n          );\n\n          router.navigate(['setup']).then();\n        } else if (error.status === 429) {\n          this.paintTooManyRequests();\n        }\n      }\n    \n    })\n  }\n\n  ngOnInit(): void {}\n\n  private paintNumbers(edgePowerFlow: SolarEdgePowerFlow): void {\n    this.pvLoad = edgePowerFlow.siteCurrentPowerFlow.PV.currentPower;\n    this.gridLoad = edgePowerFlow.siteCurrentPowerFlow.GRID.currentPower;\n    this.load = edgePowerFlow.siteCurrentPowerFlow.LOAD.currentPower;\n    this.loadUnit = edgePowerFlow.siteCurrentPowerFlow.unit;\n    this.lastUpdated = `Aktualisiert: ${new Date().toLocaleTimeString()}`;\n    this.solarPumpingIn =\n      edgePowerFlow.siteCurrentPowerFlow.PV.currentPower > 0 ? '>' : '';\n    this.gridPumpinInOrOut =\n      edgePowerFlow.siteCurrentPowerFlow.PV.currentPower >\n      edgePowerFlow.siteCurrentPowerFlow.LOAD.currentPower\n        ? '>'\n        : '<';\n\n    this.ngxSpinner.hide('solar-connection-spinner');\n    this.finishedLoading = true;\n  }\n\n  private paintTooManyRequests(): void {\n    console.log('Too many requests!');\n  }\n}\n","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { SolarService } from '../../services/solar.service';\n\n@Component({\n  selector: 'yah-solar-setup',\n  templateUrl: './solar-setup.component.html',\n  styleUrls: ['./solar-setup.component.scss'],\n})\nexport class SolarSetupComponent implements OnInit {\n  isActivated = false;\n  validApiKey = 'disconnected';\n  validSiteId = 'disconnected';\n\n  @ViewChild('activateToggle', { static: true })\n  activateToggle: ElementRef<HTMLInputElement>;\n\n  @ViewChild('siteId', { static: true }) siteId: ElementRef<HTMLInputElement>;\n  @ViewChild('apiKey', { static: true }) apiKey: ElementRef<HTMLInputElement>;\n\n  constructor(private solarService: SolarService) {}\n\n  ngOnInit(): void {\n    this.solarService.isActivated$.subscribe((isActivated) => {\n      this.isActivated = isActivated;\n    });\n\n    this.solarService.apiKey.subscribe((apiKey) => {\n      if (apiKey) {\n        this.apiKey.nativeElement.value = apiKey;\n        this.validApiKey = 'connected';\n      }\n    });\n\n    this.solarService.siteId.subscribe((siteId) => {\n      if (siteId) {\n        this.siteId.nativeElement.value = siteId;\n        this.validSiteId = 'connected';\n      }\n    });\n  }\n\n  public setChecked(event: Event): void {\n    const htmlInput = event.target as HTMLInputElement;\n    this.solarService.setActivated(htmlInput.checked).subscribe();\n  }\n\n  public setSiteId(event: Event): void {\n    const htmlInput = event.target as HTMLInputElement;\n\n    if (htmlInput.value.length > 0) {\n      this.validSiteId = 'connected';\n      this.solarService.setSiteId(htmlInput.value).subscribe();\n    }\n  }\n\n  public setApiKey(event: Event): void {\n    const htmlInput = event.target as HTMLInputElement;\n\n    if (htmlInput.value.length > 0) {\n      this.validApiKey = 'connected';\n      this.solarService.setApiKey(htmlInput.value).subscribe();\n    }\n  }\n}\n","<form>\n\n  <h2> <img src=\"assets/solar-panel.svg\" width=\"32\"> SolarEdge Einstellungen </h2>\n  <p class=\"no-margin\"> Aktiviert </p>\n  <label class=\"switch\">\n    <input #activateToggle type=\"checkbox\" (change)=\"setChecked($event)\" [checked]=\"isActivated\">\n    <span class=\"slider\"></span>\n  </label>\n\n\n  <p></p>\n\n  <p class=\"no-margin\"> SiteId </p>\n  <div class=\"input-row\">\n    <input #siteId (input)='setSiteId($event)' type=\"text\" class=\"input-frosted\">\n    <i class=\"symbol {{validSiteId}}\" ></i>\n  </div>\n\n  <p class=\"no-margin\"> Api Key </p>\n  <div class=\"input-row\">\n    <input #apiKey (input)='setApiKey($event)' type=\"text\" class=\"input-frosted\">\n    <i class=\"symbol {{validApiKey}}\" ></i>\n  </div>\n\n\n\n</form>\n\n\n<!-- <div>Icons made by <a href=\"https://www.flaticon.com/authors/pixel-perfect\" title=\"Pixel perfect\">Pixel perfect</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div> -->\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SolarButtonComponent } from './components/solar-button/solar-button.component';\nimport { SolarSetupComponent } from './components/solar-setup/solar-setup.component';\nimport {NgxSpinnerModule} from 'ngx-spinner';\n\n\n\n@NgModule({\n  declarations: [SolarButtonComponent, SolarSetupComponent],\n  imports: [\n    CommonModule,\n    NgxSpinnerModule\n  ],\n  exports: [ SolarButtonComponent, SolarSetupComponent ]\n})\nexport class SolarModule { }\n","/*\n * Public API Surface of yah-solar\n */\n\nexport * from './lib/solar.module';\nexport * from './lib/components/solar-button/solar-button.component';\nexport * from './lib/services/solar.service';\nexport * from './lib/types/solar.edge.power.flow';\nexport * from './lib/components/solar-setup/solar-setup.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}},"fesm2015":{"code":"import * as i0 from '@angular/core';\nimport { Injectable, Component, ViewChild, NgModule } from '@angular/core';\nimport * as i5 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport { timer, combineLatest, NEVER } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport * as i1 from '@angular/common/http';\nimport * as i2 from '@ngx-pwa/local-storage';\nimport * as i2$1 from '@angular/router';\nimport * as i3 from '@ngneat/hot-toast';\nimport * as i4 from 'ngx-spinner';\nimport { NgxSpinnerModule } from 'ngx-spinner';\n\nclass SolarService {\n    constructor(http, localDb) {\n        this.http = http;\n        this.localDb = localDb;\n        this.internalSiteId = 'site';\n        this.internalApiKey = 'apiKey';\n        this.BASE_URL = 'https://monitoringapi.solaredge.com/site';\n        this.SOLAR_IS_ACTIVATED_KEY = 'SOLAR_EDGE_ACTIVATED';\n        this.SOLAR_SITE_ID_KEY = 'SOLAR_EDGE_SITE_ID';\n        this.SOLAR_SITE_API_KEY = 'SOLAR_EDGE_API_KEY';\n        this.delayForFiveSeconds = () => timer(5000);\n        this.isActivated$ = this.localDb\n            .get(this.SOLAR_IS_ACTIVATED_KEY, { type: 'boolean' })\n            .pipe(map((isActivated) => (isActivated === undefined ? false : isActivated)));\n        this.siteId = this.localDb.watch(this.SOLAR_SITE_ID_KEY, {\n            type: 'string',\n        });\n        this.apiKey = this.localDb.watch(this.SOLAR_SITE_API_KEY, {\n            type: 'string',\n        });\n        this.currentPower$ = combineLatest([\n            this.localDb.watch(this.SOLAR_IS_ACTIVATED_KEY, { type: 'boolean' }),\n            this.localDb.watch(this.SOLAR_SITE_ID_KEY, { type: 'string' }),\n            this.localDb.watch(this.SOLAR_SITE_API_KEY, { type: 'string' }),\n        ]).pipe(map(([activated, siteId, apiKey]) => {\n            if (activated) {\n                this.internalSiteId = siteId;\n                this.internalApiKey = apiKey;\n                return siteId !== undefined && apiKey !== undefined;\n            }\n            return false;\n        }), switchMap((shouldRequest) => {\n            return shouldRequest\n                ? this.http\n                    .get(`${this.BASE_URL}/${this.internalSiteId}/currentPowerFlow.json`, {\n                    params: {\n                        api_key: this.internalApiKey,\n                    },\n                })\n                    .pipe()\n                : NEVER;\n        }));\n    }\n    setActivated(isActivated) {\n        return this.localDb.set(this.SOLAR_IS_ACTIVATED_KEY, isActivated, {\n            type: 'boolean',\n        });\n    }\n    setSiteId(value) {\n        return this.localDb.set(this.SOLAR_SITE_ID_KEY, value, {\n            type: 'string',\n        });\n    }\n    setApiKey(value) {\n        return this.localDb.set(this.SOLAR_SITE_API_KEY, value, {\n            type: 'string',\n        });\n    }\n}\nSolarService.ɵfac = function SolarService_Factory(t) { return new (t || SolarService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.StorageMap)); };\nSolarService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: SolarService, factory: SolarService.ɵfac, providedIn: 'root' });\n(function () {\n    (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SolarService, [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], function () { return [{ type: i1.HttpClient }, { type: i2.StorageMap }]; }, null);\n})();\n\nfunction SolarButtonComponent_div_5_Template(rf, ctx) {\n    if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 6);\n        i0.ɵɵelementStart(1, \"div\", 7);\n        i0.ɵɵelement(2, \"img\", 8);\n        i0.ɵɵelementStart(3, \"div\", 9);\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 10);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 7);\n        i0.ɵɵelement(8, \"img\", 11);\n        i0.ɵɵelementStart(9, \"div\", 9);\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 10);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 7);\n        i0.ɵɵelement(14, \"img\", 12);\n        i0.ɵɵelementStart(15, \"div\", 9);\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n        const ctx_r0 = i0.ɵɵnextContext();\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngClass\", ctx_r0.pvLoad > 0 ? \"saving\" : \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate2(\" \", ctx_r0.pvLoad, \" \", ctx_r0.loadUnit, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx_r0.solarPumpingIn, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngClass\", ctx_r0.pvLoad > ctx_r0.gridLoad ? \"saving\" : \"draining\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate2(\" \", ctx_r0.load, \" \", ctx_r0.loadUnit, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx_r0.gridPumpinInOrOut, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngClass\", ctx_r0.gridLoad > 0 ? \"draining\" : \"saving\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate2(\" \", ctx_r0.gridLoad, \" \", ctx_r0.loadUnit, \" \");\n    }\n}\nfunction SolarButtonComponent_div_6_Template(rf, ctx) {\n    if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 13);\n        i0.ɵɵtext(1);\n        i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n        const ctx_r1 = i0.ɵɵnextContext();\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(ctx_r1.lastUpdated);\n    }\n}\nclass SolarButtonComponent {\n    constructor(solarService, router, hotToast, ngxSpinner) {\n        this.solarService = solarService;\n        this.router = router;\n        this.hotToast = hotToast;\n        this.ngxSpinner = ngxSpinner;\n        this.loadUnit = '';\n        this.finishedLoading = false;\n        this.ngxSpinner.show('solar-connection-spinner');\n        this.solarService.currentPower$.subscribe({\n            next: (res) => this.paintNumbers(res),\n            error: (error) => {\n                if (error.status === 403) {\n                    this.hotToast.error(`SolarEdge Brauche Ihr aufmerksamkeit: ${error.error.String}`, {\n                        style: {\n                            background: 'rgba(255, 255, 255, 0.8)',\n                        },\n                        id: 'solar-edge',\n                        ariaLive: 'polite',\n                    });\n                    router.navigate(['setup']).then();\n                }\n                else if (error.status === 429) {\n                    this.paintTooManyRequests();\n                }\n            }\n        });\n    }\n    ngOnInit() { }\n    paintNumbers(edgePowerFlow) {\n        this.pvLoad = edgePowerFlow.siteCurrentPowerFlow.PV.currentPower;\n        this.gridLoad = edgePowerFlow.siteCurrentPowerFlow.GRID.currentPower;\n        this.load = edgePowerFlow.siteCurrentPowerFlow.LOAD.currentPower;\n        this.loadUnit = edgePowerFlow.siteCurrentPowerFlow.unit;\n        this.lastUpdated = `Aktualisiert: ${new Date().toLocaleTimeString()}`;\n        this.solarPumpingIn =\n            edgePowerFlow.siteCurrentPowerFlow.PV.currentPower > 0 ? '>' : '';\n        this.gridPumpinInOrOut =\n            edgePowerFlow.siteCurrentPowerFlow.PV.currentPower >\n                edgePowerFlow.siteCurrentPowerFlow.LOAD.currentPower\n                ? '>'\n                : '<';\n        this.ngxSpinner.hide('solar-connection-spinner');\n        this.finishedLoading = true;\n    }\n    paintTooManyRequests() {\n        console.log('Too many requests!');\n    }\n}\nSolarButtonComponent.ɵfac = function SolarButtonComponent_Factory(t) { return new (t || SolarButtonComponent)(i0.ɵɵdirectiveInject(SolarService), i0.ɵɵdirectiveInject(i2$1.Router), i0.ɵɵdirectiveInject(i3.HotToastService), i0.ɵɵdirectiveInject(i4.NgxSpinnerService)); };\nSolarButtonComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: SolarButtonComponent, selectors: [[\"yah-solar-button\"]], decls: 7, vars: 3, consts: [[1, \"box\"], [1, \"header\"], [\"src\", \"./assets/solar-panel.svg\"], [\"name\", \"solar-connection-spinner\", \"bdColor\", \"rgba(0,0,0,0)\", \"size\", \"medium\", \"color\", \"#fff\", \"type\", \"square-loader\", 3, \"fullScreen\"], [\"class\", \"power-layout\", 4, \"ngIf\"], [\"class\", \"footer\", 4, \"ngIf\"], [1, \"power-layout\"], [1, \"power-item\"], [\"src\", \"./assets/solar-panel-inner.svg\", 1, \"img\"], [1, \"text\", 3, \"ngClass\"], [1, \"power-flow\"], [\"src\", \"./assets/home.svg\", 1, \"img\"], [\"src\", \"./assets/power-line.svg\", 1, \"img\"], [1, \"footer\"]], template: function SolarButtonComponent_Template(rf, ctx) {\n        if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0);\n            i0.ɵɵelementStart(1, \"div\", 1);\n            i0.ɵɵelement(2, \"img\", 2);\n            i0.ɵɵtext(3, \"Solar\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(4, \"ngx-spinner\", 3);\n            i0.ɵɵtemplate(5, SolarButtonComponent_div_5_Template, 17, 11, \"div\", 4);\n            i0.ɵɵtemplate(6, SolarButtonComponent_div_6_Template, 2, 1, \"div\", 5);\n            i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"fullScreen\", false);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.finishedLoading);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.finishedLoading);\n        }\n    }, directives: [i4.NgxSpinnerComponent, i5.NgIf, i5.NgClass], styles: [\".box[_ngcontent-%COMP%]{background:rgba(255,255,255,.25);border:1px solid rgba(255,255,255,.2);backdrop-filter:blur(.2rem);-webkit-backdrop-filter:blur(.2rem);border-radius:.7rem;min-height:20rem;min-width:40rem;max-width:40rem;transition:all 50ms ease;position:relative}.box[_ngcontent-%COMP%]:active{box-shadow:0 .4rem 2rem #0000005e}.box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{border-radius:.7rem .7rem 0 0;background:#fff;color:#000;font-size:2rem;display:grid;grid-template-columns:10fr 90fr;padding:.5rem 1rem}.box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]{padding-top:2rem;display:grid;grid-auto-columns:1fr 3rem 1fr 3rem 1fr;grid-auto-flow:column;justify-items:center}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]   .power-flow[_ngcontent-%COMP%]{font-size:4rem}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]   .power-item[_ngcontent-%COMP%]{text-align:center}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:1.5rem}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]   .draining[_ngcontent-%COMP%]{color:#ea1313}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]   .saving[_ngcontent-%COMP%]{color:#44db33}.box[_ngcontent-%COMP%]   .power-layout[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{height:4rem}.box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{font-size:.8rem;position:absolute;bottom:0;right:0;padding:0 .3rem .4rem 0}\"] });\n(function () {\n    (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SolarButtonComponent, [{\n            type: Component,\n            args: [{ selector: 'yah-solar-button', template: \"<div class=\\\"box\\\">\\n  <div class=\\\"header\\\"><img src=\\\"./assets/solar-panel.svg\\\" />Solar</div>\\n\\n  <ngx-spinner\\n    name=\\\"solar-connection-spinner\\\"\\n    bdColor=\\\"rgba(0,0,0,0)\\\"\\n    size=\\\"medium\\\"\\n    color=\\\"#fff\\\"\\n    type=\\\"square-loader\\\"\\n    [fullScreen]=\\\"false\\\"\\n    ></ngx-spinner\\n  >\\n\\n  <div class=\\\"power-layout\\\" *ngIf=\\\"finishedLoading\\\">\\n    <div class=\\\"power-item\\\">\\n      <img class=\\\"img\\\" src=\\\"./assets/solar-panel-inner.svg\\\"/>\\n      <div class=\\\"text\\\" [ngClass]=\\\"pvLoad > 0 ? 'saving' : ''\\\">\\n        {{ pvLoad }} {{ loadUnit }}\\n      </div>\\n    </div>\\n    <div class=\\\"power-flow\\\"> {{solarPumpingIn}} </div>\\n    <div class=\\\"power-item\\\">\\n      <img class=\\\"img\\\" src=\\\"./assets/home.svg\\\" />\\n      <div class=\\\"text\\\" [ngClass]=\\\"pvLoad > gridLoad ? 'saving' : 'draining'\\\">\\n        {{ load }} {{ loadUnit }}\\n      </div>\\n    </div>\\n    <div class=\\\"power-flow\\\"> {{gridPumpinInOrOut}} </div>\\n    <div class=\\\"power-item\\\">\\n      <img class=\\\"img\\\" src=\\\"./assets/power-line.svg\\\"/>\\n      <div class=\\\"text\\\" [ngClass]=\\\"gridLoad > 0 ? 'draining' : 'saving'\\\">\\n        {{ gridLoad }} {{ loadUnit }}\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"footer\\\" *ngIf=\\\"finishedLoading\\\">{{lastUpdated}}</div>\\n\\n</div>\\n\\n<!-- <div>Icons made by <a href=\\\"https://www.flaticon.com/authors/monkik\\\" title=\\\"monkik\\\">monkik</a> from <a href=\\\"https://www.flaticon.com/\\\" title=\\\"Flaticon\\\">www.flaticon.com</a></div>\\n\\n<div>Icons made by <a href=\\\"https://creativemarket.com/Becris\\\" title=\\\"Becris\\\">Becris</a> from <a href=\\\"https://www.flaticon.com/\\\" title=\\\"Flaticon\\\">www.flaticon.com</a></div>\\n<div>Icons made by <a href=\\\"https://www.flaticon.com/authors/smalllikeart\\\" title=\\\"smalllikeart\\\">smalllikeart</a> from <a href=\\\"https://www.flaticon.com/\\\" title=\\\"Flaticon\\\">www.flaticon.com</a></div>\\n<div>Icons made by <a href=\\\"https://www.freepik.com\\\" title=\\\"Freepik\\\">Freepik</a> from <a href=\\\"https://www.flaticon.com/\\\" title=\\\"Flaticon\\\">www.flaticon.com</a></div>\\n\\n-->\\n\", styles: [\".box{background:rgba(255,255,255,.25);border:1px solid rgba(255,255,255,.2);backdrop-filter:blur(.2rem);-webkit-backdrop-filter:blur(.2rem);border-radius:.7rem;min-height:20rem;min-width:40rem;max-width:40rem;transition:all 50ms ease;position:relative}.box:active{box-shadow:0 .4rem 2rem #0000005e}.box .header{border-radius:.7rem .7rem 0 0;background:#fff;color:#000;font-size:2rem;display:grid;grid-template-columns:10fr 90fr;padding:.5rem 1rem}.box .header img{width:3rem;height:3rem}.box .power-layout{padding-top:2rem;display:grid;grid-auto-columns:1fr 3rem 1fr 3rem 1fr;grid-auto-flow:column;justify-items:center}.box .power-layout .power-flow{font-size:4rem}.box .power-layout .power-item{text-align:center}.box .power-layout .text{font-size:1.5rem}.box .power-layout .draining{color:#ea1313}.box .power-layout .saving{color:#44db33}.box .power-layout .img{height:4rem}.box .footer{font-size:.8rem;position:absolute;bottom:0;right:0;padding:0 .3rem .4rem 0}\\n\"] }]\n        }], function () { return [{ type: SolarService }, { type: i2$1.Router }, { type: i3.HotToastService }, { type: i4.NgxSpinnerService }]; }, null);\n})();\n\nconst _c0 = [\"activateToggle\"];\nconst _c1 = [\"siteId\"];\nconst _c2 = [\"apiKey\"];\nclass SolarSetupComponent {\n    constructor(solarService) {\n        this.solarService = solarService;\n        this.isActivated = false;\n        this.validApiKey = 'disconnected';\n        this.validSiteId = 'disconnected';\n    }\n    ngOnInit() {\n        this.solarService.isActivated$.subscribe((isActivated) => {\n            this.isActivated = isActivated;\n        });\n        this.solarService.apiKey.subscribe((apiKey) => {\n            if (apiKey) {\n                this.apiKey.nativeElement.value = apiKey;\n                this.validApiKey = 'connected';\n            }\n        });\n        this.solarService.siteId.subscribe((siteId) => {\n            if (siteId) {\n                this.siteId.nativeElement.value = siteId;\n                this.validSiteId = 'connected';\n            }\n        });\n    }\n    setChecked(event) {\n        const htmlInput = event.target;\n        this.solarService.setActivated(htmlInput.checked).subscribe();\n    }\n    setSiteId(event) {\n        const htmlInput = event.target;\n        if (htmlInput.value.length > 0) {\n            this.validSiteId = 'connected';\n            this.solarService.setSiteId(htmlInput.value).subscribe();\n        }\n    }\n    setApiKey(event) {\n        const htmlInput = event.target;\n        if (htmlInput.value.length > 0) {\n            this.validApiKey = 'connected';\n            this.solarService.setApiKey(htmlInput.value).subscribe();\n        }\n    }\n}\nSolarSetupComponent.ɵfac = function SolarSetupComponent_Factory(t) { return new (t || SolarSetupComponent)(i0.ɵɵdirectiveInject(SolarService)); };\nSolarSetupComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: SolarSetupComponent, selectors: [[\"yah-solar-setup\"]], viewQuery: function SolarSetupComponent_Query(rf, ctx) {\n        if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 7);\n            i0.ɵɵviewQuery(_c1, 7);\n            i0.ɵɵviewQuery(_c2, 7);\n        }\n        if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.activateToggle = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.siteId = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.apiKey = _t.first);\n        }\n    }, decls: 23, vars: 7, consts: [[\"src\", \"assets/solar-panel.svg\", \"width\", \"32\"], [1, \"no-margin\"], [1, \"switch\"], [\"type\", \"checkbox\", 3, \"checked\", \"change\"], [\"activateToggle\", \"\"], [1, \"slider\"], [1, \"input-row\"], [\"type\", \"text\", 1, \"input-frosted\", 3, \"input\"], [\"siteId\", \"\"], [\"apiKey\", \"\"]], template: function SolarSetupComponent_Template(rf, ctx) {\n        if (rf & 1) {\n            i0.ɵɵelementStart(0, \"form\");\n            i0.ɵɵelementStart(1, \"h2\");\n            i0.ɵɵelement(2, \"img\", 0);\n            i0.ɵɵtext(3, \" SolarEdge Einstellungen \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"p\", 1);\n            i0.ɵɵtext(5, \" Aktiviert \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"label\", 2);\n            i0.ɵɵelementStart(7, \"input\", 3, 4);\n            i0.ɵɵlistener(\"change\", function SolarSetupComponent_Template_input_change_7_listener($event) { return ctx.setChecked($event); });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(9, \"span\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(10, \"p\");\n            i0.ɵɵelementStart(11, \"p\", 1);\n            i0.ɵɵtext(12, \" SiteId \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"div\", 6);\n            i0.ɵɵelementStart(14, \"input\", 7, 8);\n            i0.ɵɵlistener(\"input\", function SolarSetupComponent_Template_input_input_14_listener($event) { return ctx.setSiteId($event); });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(16, \"i\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"p\", 1);\n            i0.ɵɵtext(18, \" Api Key \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"div\", 6);\n            i0.ɵɵelementStart(20, \"input\", 7, 9);\n            i0.ɵɵlistener(\"input\", function SolarSetupComponent_Template_input_input_20_listener($event) { return ctx.setApiKey($event); });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(22, \"i\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"checked\", ctx.isActivated);\n            i0.ɵɵadvance(9);\n            i0.ɵɵclassMapInterpolate1(\"symbol \", ctx.validSiteId, \"\");\n            i0.ɵɵadvance(6);\n            i0.ɵɵclassMapInterpolate1(\"symbol \", ctx.validApiKey, \"\");\n        }\n    }, styles: [\"form[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column}form[_ngcontent-%COMP%]   .no-margin[_ngcontent-%COMP%]{margin:0}form[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]{display:flex;align-items:center}form[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]   .input-frosted[_ngcontent-%COMP%]{color:#fff;font-size:1.4rem;font-weight:800;padding:1rem;border:none;background:rgba(255,255,255,.4);backdrop-filter:blur(.2rem);-webkit-backdrop-filter:blur(.2rem);border-radius:.7rem;max-width:90%}form[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]   .symbol[_ngcontent-%COMP%]{display:flex;align-self:center;width:2rem;height:2rem;margin-left:.5rem}form[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]   .symbol.connected[_ngcontent-%COMP%]{background:url(\\\"data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 encoding%3D%22iso-8859-1%22%3F%3E%0D%3C!-- Generator%3A Adobe Illustrator 19.0.0%2C SVG Export Plug-In . SVG Version%3A 6.00 Build 0)  --%3E%0D%3Csvg version%3D%221.1%22 id%3D%22Layer_1%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 x%3D%220px%22 y%3D%220px%22%0D%09 viewBox%3D%220 0 511.999 511.999%22 style%3D%22enable-background%3Anew 0 0 511.999 511.999%3B%22 xml%3Aspace%3D%22preserve%22%3E%0D%3Cpath style%3D%22fill%3A%23B7E183%3B%22 d%3D%22M502.87%2C75.474c-12.201-12.204-31.952-12.205-44.154-0.001L163.89%2C370.299L53.284%2C259.693%0D%09c-12.201-12.204-31.952-12.205-44.154-0.001c-12.173%2C12.174-12.173%2C31.981%2C0%2C44.153L141.814%2C436.53%0D%09c12.199%2C12.198%2C31.953%2C12.2%2C44.153%2C0L502.87%2C119.626C515.042%2C107.453%2C515.042%2C87.645%2C502.87%2C75.474z%22%2F%3E%0D%3Cpath style%3D%22fill%3A%2371DE56%3B%22 d%3D%22M502.87%2C75.474c-12.201-12.204-31.952-12.205-44.154-0.001L243.511%2C290.678v88.306L502.87%2C119.626%0D%09C515.042%2C107.453%2C515.042%2C87.645%2C502.87%2C75.474z%22%2F%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3C%2Fsvg%3E%0D\\\") no-repeat}form[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]   .symbol.disconnected[_ngcontent-%COMP%]{background:url(\\\"data:image/svg+xml,%3Csvg height%3D%22100%25%22 viewBox%3D%220 0 329.26933 329%22 width%3D%2220%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg fill%3D%22%23f44336%22%3E%3Cpath d%3D%22m21.339844 329.398438c-5.460938 0-10.925782-2.089844-15.082032-6.25-8.34375-8.339844-8.34375-21.824219 0-30.164063l286.589844-286.59375c8.339844-8.339844 21.824219-8.339844 30.164063 0 8.34375 8.339844 8.34375 21.824219 0 30.164063l-286.589844 286.59375c-4.183594 4.179687-9.621094 6.25-15.082031 6.25zm0 0%22%2F%3E%3Cpath d%3D%22m307.929688 329.398438c-5.460938 0-10.921876-2.089844-15.082032-6.25l-286.589844-286.59375c-8.34375-8.339844-8.34375-21.824219 0-30.164063 8.339844-8.339844 21.820313-8.339844 30.164063 0l286.589844 286.59375c8.34375 8.339844 8.34375 21.824219 0 30.164063-4.160157 4.179687-9.621094 6.25-15.082031 6.25zm0 0%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\\\") center no-repeat}form[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]   .symbol.loading[_ngcontent-%COMP%]{background:url(\\\"data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 encoding%3D%22UTF-8%22 standalone%3D%22no%22%3F%3E%3Csvg xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 version%3D%221.0%22 width%3D%22100pt%22 height%3D%22100pt%22 viewBox%3D%220 0 128 128%22 xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23000%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23f8f8f8%22 transform%3D%22rotate(30 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23e8e8e8%22 transform%3D%22rotate(60 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23d4d4d4%22 transform%3D%22rotate(90 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23bebebe%22 transform%3D%22rotate(120 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23a6a6a6%22 transform%3D%22rotate(150 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%238e8e8e%22 transform%3D%22rotate(180 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23737373%22 transform%3D%22rotate(210 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%235a5a5a%22 transform%3D%22rotate(240 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23414141%22 transform%3D%22rotate(270 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%232a2a2a%22 transform%3D%22rotate(300 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23151515%22 transform%3D%22rotate(330 64 64)%22%2F%3E%3CanimateTransform attributeName%3D%22transform%22 type%3D%22rotate%22 values%3D%220 64 64%3B30 64 64%3B60 64 64%3B90 64 64%3B120 64 64%3B150 64 64%3B180 64 64%3B210 64 64%3B240 64 64%3B270 64 64%3B300 64 64%3B330 64 64%22 calcMode%3D%22discrete%22 dur%3D%22240ms%22 repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fg%3E%3C%2Fsvg%3E\\\");background-size:contain}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:\\\"\\\";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}\"] });\n(function () {\n    (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SolarSetupComponent, [{\n            type: Component,\n            args: [{ selector: 'yah-solar-setup', template: \"<form>\\n\\n  <h2> <img src=\\\"assets/solar-panel.svg\\\" width=\\\"32\\\"> SolarEdge Einstellungen </h2>\\n  <p class=\\\"no-margin\\\"> Aktiviert </p>\\n  <label class=\\\"switch\\\">\\n    <input #activateToggle type=\\\"checkbox\\\" (change)=\\\"setChecked($event)\\\" [checked]=\\\"isActivated\\\">\\n    <span class=\\\"slider\\\"></span>\\n  </label>\\n\\n\\n  <p></p>\\n\\n  <p class=\\\"no-margin\\\"> SiteId </p>\\n  <div class=\\\"input-row\\\">\\n    <input #siteId (input)='setSiteId($event)' type=\\\"text\\\" class=\\\"input-frosted\\\">\\n    <i class=\\\"symbol {{validSiteId}}\\\" ></i>\\n  </div>\\n\\n  <p class=\\\"no-margin\\\"> Api Key </p>\\n  <div class=\\\"input-row\\\">\\n    <input #apiKey (input)='setApiKey($event)' type=\\\"text\\\" class=\\\"input-frosted\\\">\\n    <i class=\\\"symbol {{validApiKey}}\\\" ></i>\\n  </div>\\n\\n\\n\\n</form>\\n\\n\\n<!-- <div>Icons made by <a href=\\\"https://www.flaticon.com/authors/pixel-perfect\\\" title=\\\"Pixel perfect\\\">Pixel perfect</a> from <a href=\\\"https://www.flaticon.com/\\\" title=\\\"Flaticon\\\">www.flaticon.com</a></div> -->\\n\", styles: [\"form{display:flex;justify-content:center;flex-direction:column}form .no-margin{margin:0}form .input-row{display:flex;align-items:center}form .input-row .input-frosted{color:#fff;font-size:1.4rem;font-weight:800;padding:1rem;border:none;background:rgba(255,255,255,.4);backdrop-filter:blur(.2rem);-webkit-backdrop-filter:blur(.2rem);border-radius:.7rem;max-width:90%}form .input-row .symbol{display:flex;align-self:center;width:2rem;height:2rem;margin-left:.5rem}form .input-row .symbol.connected{background:url(\\\"data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 encoding%3D%22iso-8859-1%22%3F%3E%0D%3C!-- Generator%3A Adobe Illustrator 19.0.0%2C SVG Export Plug-In . SVG Version%3A 6.00 Build 0)  --%3E%0D%3Csvg version%3D%221.1%22 id%3D%22Layer_1%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 x%3D%220px%22 y%3D%220px%22%0D%09 viewBox%3D%220 0 511.999 511.999%22 style%3D%22enable-background%3Anew 0 0 511.999 511.999%3B%22 xml%3Aspace%3D%22preserve%22%3E%0D%3Cpath style%3D%22fill%3A%23B7E183%3B%22 d%3D%22M502.87%2C75.474c-12.201-12.204-31.952-12.205-44.154-0.001L163.89%2C370.299L53.284%2C259.693%0D%09c-12.201-12.204-31.952-12.205-44.154-0.001c-12.173%2C12.174-12.173%2C31.981%2C0%2C44.153L141.814%2C436.53%0D%09c12.199%2C12.198%2C31.953%2C12.2%2C44.153%2C0L502.87%2C119.626C515.042%2C107.453%2C515.042%2C87.645%2C502.87%2C75.474z%22%2F%3E%0D%3Cpath style%3D%22fill%3A%2371DE56%3B%22 d%3D%22M502.87%2C75.474c-12.201-12.204-31.952-12.205-44.154-0.001L243.511%2C290.678v88.306L502.87%2C119.626%0D%09C515.042%2C107.453%2C515.042%2C87.645%2C502.87%2C75.474z%22%2F%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3Cg%3E%0D%3C%2Fg%3E%0D%3C%2Fsvg%3E%0D\\\") no-repeat}form .input-row .symbol.disconnected{background:url(\\\"data:image/svg+xml,%3Csvg height%3D%22100%25%22 viewBox%3D%220 0 329.26933 329%22 width%3D%2220%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg fill%3D%22%23f44336%22%3E%3Cpath d%3D%22m21.339844 329.398438c-5.460938 0-10.925782-2.089844-15.082032-6.25-8.34375-8.339844-8.34375-21.824219 0-30.164063l286.589844-286.59375c8.339844-8.339844 21.824219-8.339844 30.164063 0 8.34375 8.339844 8.34375 21.824219 0 30.164063l-286.589844 286.59375c-4.183594 4.179687-9.621094 6.25-15.082031 6.25zm0 0%22%2F%3E%3Cpath d%3D%22m307.929688 329.398438c-5.460938 0-10.921876-2.089844-15.082032-6.25l-286.589844-286.59375c-8.34375-8.339844-8.34375-21.824219 0-30.164063 8.339844-8.339844 21.820313-8.339844 30.164063 0l286.589844 286.59375c8.34375 8.339844 8.34375 21.824219 0 30.164063-4.160157 4.179687-9.621094 6.25-15.082031 6.25zm0 0%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\\\") center no-repeat}form .input-row .symbol.loading{background:url(\\\"data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 encoding%3D%22UTF-8%22 standalone%3D%22no%22%3F%3E%3Csvg xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 version%3D%221.0%22 width%3D%22100pt%22 height%3D%22100pt%22 viewBox%3D%220 0 128 128%22 xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23000%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23f8f8f8%22 transform%3D%22rotate(30 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23e8e8e8%22 transform%3D%22rotate(60 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23d4d4d4%22 transform%3D%22rotate(90 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23bebebe%22 transform%3D%22rotate(120 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23a6a6a6%22 transform%3D%22rotate(150 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%238e8e8e%22 transform%3D%22rotate(180 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23737373%22 transform%3D%22rotate(210 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%235a5a5a%22 transform%3D%22rotate(240 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23414141%22 transform%3D%22rotate(270 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%232a2a2a%22 transform%3D%22rotate(300 64 64)%22%2F%3E%3Cpath d%3D%22M64 1.5a62.8 62.8 0 0 0-12.4 1.23l-.38-1.45a64.56 64.56 0 0 1 25.57 0l-.4 1.45A62.78 62.78 0 0 0 64 1.5zm0 3a59.78 59.78 0 0 1 11.62 1.14L71.34 21.6a43.43 43.43 0 0 0-14.67.04l-4.3-16A59.78 59.78 0 0 1 64.02 4.5z%22 fill%3D%22%23151515%22 transform%3D%22rotate(330 64 64)%22%2F%3E%3CanimateTransform attributeName%3D%22transform%22 type%3D%22rotate%22 values%3D%220 64 64%3B30 64 64%3B60 64 64%3B90 64 64%3B120 64 64%3B150 64 64%3B180 64 64%3B210 64 64%3B240 64 64%3B270 64 64%3B300 64 64%3B330 64 64%22 calcMode%3D%22discrete%22 dur%3D%22240ms%22 repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fg%3E%3C%2Fsvg%3E\\\");background-size:contain}.switch{position:relative;display:inline-block;width:60px;height:34px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.slider:before{position:absolute;content:\\\"\\\";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s}input:checked+.slider{background-color:#2196f3}input:focus+.slider{box-shadow:0 0 1px #2196f3}input:checked+.slider:before{transform:translate(26px)}\\n\"] }]\n        }], function () { return [{ type: SolarService }]; }, { activateToggle: [{\n                type: ViewChild,\n                args: ['activateToggle', { static: true }]\n            }], siteId: [{\n                type: ViewChild,\n                args: ['siteId', { static: true }]\n            }], apiKey: [{\n                type: ViewChild,\n                args: ['apiKey', { static: true }]\n            }] });\n})();\n\nclass SolarModule {\n}\nSolarModule.ɵfac = function SolarModule_Factory(t) { return new (t || SolarModule)(); };\nSolarModule.ɵmod = /*@__PURE__*/ i0.ɵɵdefineNgModule({ type: SolarModule });\nSolarModule.ɵinj = /*@__PURE__*/ i0.ɵɵdefineInjector({ imports: [[\n            CommonModule,\n            NgxSpinnerModule\n        ]] });\n(function () {\n    (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SolarModule, [{\n            type: NgModule,\n            args: [{\n                    declarations: [SolarButtonComponent, SolarSetupComponent],\n                    imports: [\n                        CommonModule,\n                        NgxSpinnerModule\n                    ],\n                    exports: [SolarButtonComponent, SolarSetupComponent]\n                }]\n        }], null, null);\n})();\n(function () {\n    (typeof ngJitMode === \"undefined\" || ngJitMode) && i0.ɵɵsetNgModuleScope(SolarModule, { declarations: [SolarButtonComponent, SolarSetupComponent], imports: [CommonModule,\n            NgxSpinnerModule], exports: [SolarButtonComponent, SolarSetupComponent] });\n})();\n\n/*\n * Public API Surface of yah-solar\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { SolarButtonComponent, SolarModule, SolarService, SolarSetupComponent };\n","map":{"version":3,"file":"yah-solar.mjs","sources":["../../../projects/yah-solar/src/lib/services/solar.service.ts","../../../projects/yah-solar/src/lib/components/solar-button/solar-button.component.html","../../../projects/yah-solar/src/lib/components/solar-button/solar-button.component.ts","../../../projects/yah-solar/src/lib/components/solar-setup/solar-setup.component.ts","../../../projects/yah-solar/src/lib/components/solar-setup/solar-setup.component.html","../../../projects/yah-solar/src/lib/solar.module.ts","../../../projects/yah-solar/src/public-api.ts","../../../projects/yah-solar/src/yah-solar.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { combineLatest, concat, EMPTY, interval, NEVER, Observable, of, timer } from 'rxjs';\nimport { delay, delayWhen, map, repeat, switchMap, timeInterval, timestamp } from 'rxjs/operators';\nimport { HttpClient } from '@angular/common/http';\nimport { SolarEdgePowerFlow } from '../types/solar.edge.power.flow';\nimport { StorageMap } from '@ngx-pwa/local-storage';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SolarService {\n  public currentPower$: Observable<SolarEdgePowerFlow>;\n  public isActivated$: Observable<boolean>;\n  public siteId: Observable<string | undefined>;\n  public apiKey: Observable<string | undefined>;\n\n  private internalSiteId = 'site';\n  private internalApiKey = 'apiKey';\n\n  private BASE_URL = 'https://monitoringapi.solaredge.com/site';\n\n  private SOLAR_IS_ACTIVATED_KEY = 'SOLAR_EDGE_ACTIVATED';\n  private SOLAR_SITE_ID_KEY = 'SOLAR_EDGE_SITE_ID';\n  private SOLAR_SITE_API_KEY = 'SOLAR_EDGE_API_KEY';\n\n  private delayForFiveSeconds = () => timer(5000);\n\n\n\n  constructor(private http: HttpClient, private localDb: StorageMap) {\n    this.isActivated$ = this.localDb\n      .get(this.SOLAR_IS_ACTIVATED_KEY, { type: 'boolean' })\n      .pipe(\n        map((isActivated) => (isActivated === undefined ? false : isActivated))\n      );\n\n    this.siteId = this.localDb.watch(this.SOLAR_SITE_ID_KEY, {\n      type: 'string',\n    });\n    this.apiKey = this.localDb.watch(this.SOLAR_SITE_API_KEY, {\n      type: 'string',\n    });\n\n    this.currentPower$ = combineLatest([\n      this.localDb.watch(this.SOLAR_IS_ACTIVATED_KEY, { type: 'boolean' }),\n      this.localDb.watch(this.SOLAR_SITE_ID_KEY, { type: 'string' }),\n      this.localDb.watch(this.SOLAR_SITE_API_KEY, { type: 'string' }),\n    ]).pipe(\n      map(([activated, siteId, apiKey]) => {\n        if (activated) {\n          this.internalSiteId = siteId;\n          this.internalApiKey = apiKey;\n          return siteId !== undefined && apiKey !== undefined;\n        }\n        return false;\n      }),\n      switchMap((shouldRequest) => {\n        return shouldRequest\n          ? this.http\n              .get<SolarEdgePowerFlow>(\n                `${this.BASE_URL}/${this.internalSiteId}/currentPowerFlow.json`,\n                {\n                  params: {\n                    api_key: this.internalApiKey,\n                  },\n                }\n              )\n              .pipe()\n          : NEVER;\n      })\n    );\n  }\n\n  public setActivated(isActivated: boolean): Observable<null> {\n    return this.localDb.set(this.SOLAR_IS_ACTIVATED_KEY, isActivated, {\n      type: 'boolean',\n    });\n  }\n\n  setSiteId(value: string): Observable<null> {\n    return this.localDb.set(this.SOLAR_SITE_ID_KEY, value, {\n      type: 'string',\n    });\n  }\n\n  setApiKey(value: string): Observable<null> {\n    return this.localDb.set(this.SOLAR_SITE_API_KEY, value, {\n      type: 'string',\n    });\n  }\n}\n","<div class=\"box\">\n  <div class=\"header\"><img src=\"./assets/solar-panel.svg\" />Solar</div>\n\n  <ngx-spinner\n    name=\"solar-connection-spinner\"\n    bdColor=\"rgba(0,0,0,0)\"\n    size=\"medium\"\n    color=\"#fff\"\n    type=\"square-loader\"\n    [fullScreen]=\"false\"\n    ></ngx-spinner\n  >\n\n  <div class=\"power-layout\" *ngIf=\"finishedLoading\">\n    <div class=\"power-item\">\n      <img class=\"img\" src=\"./assets/solar-panel-inner.svg\"/>\n      <div class=\"text\" [ngClass]=\"pvLoad > 0 ? 'saving' : ''\">\n        {{ pvLoad }} {{ loadUnit }}\n      </div>\n    </div>\n    <div class=\"power-flow\"> {{solarPumpingIn}} </div>\n    <div class=\"power-item\">\n      <img class=\"img\" src=\"./assets/home.svg\" />\n      <div class=\"text\" [ngClass]=\"pvLoad > gridLoad ? 'saving' : 'draining'\">\n        {{ load }} {{ loadUnit }}\n      </div>\n    </div>\n    <div class=\"power-flow\"> {{gridPumpinInOrOut}} </div>\n    <div class=\"power-item\">\n      <img class=\"img\" src=\"./assets/power-line.svg\"/>\n      <div class=\"text\" [ngClass]=\"gridLoad > 0 ? 'draining' : 'saving'\">\n        {{ gridLoad }} {{ loadUnit }}\n      </div>\n    </div>\n  </div>\n  <div class=\"footer\" *ngIf=\"finishedLoading\">{{lastUpdated}}</div>\n\n</div>\n\n<!-- <div>Icons made by <a href=\"https://www.flaticon.com/authors/monkik\" title=\"monkik\">monkik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>\n\n<div>Icons made by <a href=\"https://creativemarket.com/Becris\" title=\"Becris\">Becris</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>\n<div>Icons made by <a href=\"https://www.flaticon.com/authors/smalllikeart\" title=\"smalllikeart\">smalllikeart</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>\n<div>Icons made by <a href=\"https://www.freepik.com\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>\n\n-->\n","import { Component, OnInit } from '@angular/core';\nimport { SolarService } from '../../services/solar.service';\nimport { Router } from '@angular/router';\nimport { HotToastService } from '@ngneat/hot-toast';\nimport { SolarEdgePowerFlow } from '../../types/solar.edge.power.flow';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { error } from '@angular/compiler/src/util';\n\n@Component({\n  selector: 'yah-solar-button',\n  templateUrl: './solar-button.component.html',\n  styleUrls: ['./solar-button.component.scss'],\n})\nexport class SolarButtonComponent implements OnInit {\n  pvLoad: number;\n  gridLoad: number;\n  load: number;\n  loadUnit = '';\n  finishedLoading = false;\n  lastUpdated: string;\n\n  solarPumpingIn: string;\n  gridPumpinInOrOut: string;\n\n  constructor(\n    private solarService: SolarService,\n    private router: Router,\n    private hotToast: HotToastService,\n    private ngxSpinner: NgxSpinnerService\n  ) {\n    this.ngxSpinner.show('solar-connection-spinner');\n\n    this.solarService.currentPower$.subscribe({\n      next: (res) => this.paintNumbers(res) ,\n      error: (error) => {\n        if (error.status === 403) {\n          this.hotToast.error(\n            `SolarEdge Brauche Ihr aufmerksamkeit: ${error.error.String}`,\n            {\n              style: {\n                background: 'rgba(255, 255, 255, 0.8)',\n              },\n              id: 'solar-edge',\n              ariaLive: 'polite',\n            }\n          );\n\n          router.navigate(['setup']).then();\n        } else if (error.status === 429) {\n          this.paintTooManyRequests();\n        }\n      }\n    \n    })\n  }\n\n  ngOnInit(): void {}\n\n  private paintNumbers(edgePowerFlow: SolarEdgePowerFlow): void {\n    this.pvLoad = edgePowerFlow.siteCurrentPowerFlow.PV.currentPower;\n    this.gridLoad = edgePowerFlow.siteCurrentPowerFlow.GRID.currentPower;\n    this.load = edgePowerFlow.siteCurrentPowerFlow.LOAD.currentPower;\n    this.loadUnit = edgePowerFlow.siteCurrentPowerFlow.unit;\n    this.lastUpdated = `Aktualisiert: ${new Date().toLocaleTimeString()}`;\n    this.solarPumpingIn =\n      edgePowerFlow.siteCurrentPowerFlow.PV.currentPower > 0 ? '>' : '';\n    this.gridPumpinInOrOut =\n      edgePowerFlow.siteCurrentPowerFlow.PV.currentPower >\n      edgePowerFlow.siteCurrentPowerFlow.LOAD.currentPower\n        ? '>'\n        : '<';\n\n    this.ngxSpinner.hide('solar-connection-spinner');\n    this.finishedLoading = true;\n  }\n\n  private paintTooManyRequests(): void {\n    console.log('Too many requests!');\n  }\n}\n","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { SolarService } from '../../services/solar.service';\n\n@Component({\n  selector: 'yah-solar-setup',\n  templateUrl: './solar-setup.component.html',\n  styleUrls: ['./solar-setup.component.scss'],\n})\nexport class SolarSetupComponent implements OnInit {\n  isActivated = false;\n  validApiKey = 'disconnected';\n  validSiteId = 'disconnected';\n\n  @ViewChild('activateToggle', { static: true })\n  activateToggle: ElementRef<HTMLInputElement>;\n\n  @ViewChild('siteId', { static: true }) siteId: ElementRef<HTMLInputElement>;\n  @ViewChild('apiKey', { static: true }) apiKey: ElementRef<HTMLInputElement>;\n\n  constructor(private solarService: SolarService) {}\n\n  ngOnInit(): void {\n    this.solarService.isActivated$.subscribe((isActivated) => {\n      this.isActivated = isActivated;\n    });\n\n    this.solarService.apiKey.subscribe((apiKey) => {\n      if (apiKey) {\n        this.apiKey.nativeElement.value = apiKey;\n        this.validApiKey = 'connected';\n      }\n    });\n\n    this.solarService.siteId.subscribe((siteId) => {\n      if (siteId) {\n        this.siteId.nativeElement.value = siteId;\n        this.validSiteId = 'connected';\n      }\n    });\n  }\n\n  public setChecked(event: Event): void {\n    const htmlInput = event.target as HTMLInputElement;\n    this.solarService.setActivated(htmlInput.checked).subscribe();\n  }\n\n  public setSiteId(event: Event): void {\n    const htmlInput = event.target as HTMLInputElement;\n\n    if (htmlInput.value.length > 0) {\n      this.validSiteId = 'connected';\n      this.solarService.setSiteId(htmlInput.value).subscribe();\n    }\n  }\n\n  public setApiKey(event: Event): void {\n    const htmlInput = event.target as HTMLInputElement;\n\n    if (htmlInput.value.length > 0) {\n      this.validApiKey = 'connected';\n      this.solarService.setApiKey(htmlInput.value).subscribe();\n    }\n  }\n}\n","<form>\n\n  <h2> <img src=\"assets/solar-panel.svg\" width=\"32\"> SolarEdge Einstellungen </h2>\n  <p class=\"no-margin\"> Aktiviert </p>\n  <label class=\"switch\">\n    <input #activateToggle type=\"checkbox\" (change)=\"setChecked($event)\" [checked]=\"isActivated\">\n    <span class=\"slider\"></span>\n  </label>\n\n\n  <p></p>\n\n  <p class=\"no-margin\"> SiteId </p>\n  <div class=\"input-row\">\n    <input #siteId (input)='setSiteId($event)' type=\"text\" class=\"input-frosted\">\n    <i class=\"symbol {{validSiteId}}\" ></i>\n  </div>\n\n  <p class=\"no-margin\"> Api Key </p>\n  <div class=\"input-row\">\n    <input #apiKey (input)='setApiKey($event)' type=\"text\" class=\"input-frosted\">\n    <i class=\"symbol {{validApiKey}}\" ></i>\n  </div>\n\n\n\n</form>\n\n\n<!-- <div>Icons made by <a href=\"https://www.flaticon.com/authors/pixel-perfect\" title=\"Pixel perfect\">Pixel perfect</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div> -->\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SolarButtonComponent } from './components/solar-button/solar-button.component';\nimport { SolarSetupComponent } from './components/solar-setup/solar-setup.component';\nimport {NgxSpinnerModule} from 'ngx-spinner';\n\n\n\n@NgModule({\n  declarations: [SolarButtonComponent, SolarSetupComponent],\n  imports: [\n    CommonModule,\n    NgxSpinnerModule\n  ],\n  exports: [ SolarButtonComponent, SolarSetupComponent ]\n})\nexport class SolarModule { }\n","/*\n * Public API Surface of yah-solar\n */\n\nexport * from './lib/solar.module';\nexport * from './lib/components/solar-button/solar-button.component';\nexport * from './lib/services/solar.service';\nexport * from './lib/types/solar.edge.power.flow';\nexport * from './lib/components/solar-setup/solar-setup.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}}}